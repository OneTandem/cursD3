<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Update pattern 2 by @vpascual</title>
	<script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
	<div id="viz"></div>
	<script type="text/javascript">
		var viz = d3.select("#viz");

		function update(data) {
			var sel = viz.selectAll("p")
				.data(data);

			// Enter: Nous elements
			sel.enter()
				.append("p")				
				.style("color", "green")
				.merge(sel) // barregem els nous amb els que ja existien
				.text((d, i) => { return "i: " + i + " Valor: " + d})

			sel.style("color", "grey");				

			// Exit: Elements que cal treure
			sel.exit()				
				.transition()
					.duration(5000)
					.style("color", "red")
					.remove();
		}


	</script>
</body>
</html>